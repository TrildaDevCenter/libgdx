/*******************************************************************************
 * Copyright 2011 See AUTHORS file.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 ******************************************************************************/

dependencies {
	api project(":gdx")
}

apply plugin: "com.badlogicgames.jnigen.jnigen-gradle"
jnigen {
	sharedLibName = "gdx-freetype"
	multiThreadedCompile = true

	all {
		headerDirs = ["jni/freetype/include/"]
		cIncludes = [
			// BASE
			"jni/freetype/src/base/ftsystem.c",
			"jni/freetype/src/base/ftinit.c",
			"jni/freetype/src/base/ftdebug.c",
			"jni/freetype/src/base/ftbase.c",
			"jni/freetype/src/base/ftbbox.c",
			"jni/freetype/src/base/ftglyph.c",
			"jni/freetype/src/base/ftbdf.c",
			"jni/freetype/src/base/ftbitmap.c",
			"jni/freetype/src/base/ftcid.c",
			"jni/freetype/src/base/ftfstype.c",
			"jni/freetype/src/base/ftgasp.c",
			"jni/freetype/src/base/ftgxval.c",
			"jni/freetype/src/base/ftmm.c",
			"jni/freetype/src/base/ftotval.c",
			"jni/freetype/src/base/ftpatent.c",
			"jni/freetype/src/base/ftpfr.c",
			"jni/freetype/src/base/ftstroke.c",
			"jni/freetype/src/base/ftsynth.c",
			"jni/freetype/src/base/fttype1.c",
			"jni/freetype/src/base/ftwinfnt.c",
			"jni/freetype/src/base/ftxf86.c",
			// "freetype/src/base/ftmac.c",

			// DRIVERS
			"jni/freetype/src/bdf/bdf.c",
			"jni/freetype/src/cff/cff.c",
			"jni/freetype/src/cid/type1cid.c",
			"jni/freetype/src/pcf/pcf.c",
			"jni/freetype/src/pfr/pfr.c",
			"jni/freetype/src/sdf/sdf.c",
			"jni/freetype/src/sfnt/sfnt.c",
			"jni/freetype/src/truetype/truetype.c",
			"jni/freetype/src/type1/type1.c",
			"jni/freetype/src/type42/type42.c",
			"jni/freetype/src/winfonts/winfnt.c",
			// RASTERIZERS
			"jni/freetype/src/raster/raster.c",
			"jni/freetype/src/smooth/smooth.c",
			// AUX
			"jni/freetype/src/autofit/autofit.c",
			"jni/freetype/src/cache/ftcache.c",
			"jni/freetype/src/gzip/ftgzip.c",
			"jni/freetype/src/lzw/ftlzw.c",
			"jni/freetype/src/bzip2/ftbzip2.c",
			"jni/freetype/src/gxvalid/gxvalid.c",
			"jni/freetype/src/otvalid/otvalid.c",
			"jni/freetype/src/psaux/psaux.c",
			"jni/freetype/src/pshinter/pshinter.c",
			"jni/freetype/src/psnames/psnames.c"
		]

		cppExcludes = ["jni/freetype/subprojects/"]

		cFlags += " -DFT2_BUILD_LIBRARY "
		cFlags += System.getenv("CC_FLAGS") ?: ""
		cppFlags += " -DFT2_BUILD_LIBRARY "
		cppFlags += System.getenv("CPP_FLAGS") ?: ""
	}
	addWindows(x32, x86)
	addWindows(x64, x86)
	addLinux(x64, x86)
	addLinux(x32, ARM)
	addLinux(x64, ARM)
	addLinux(x64, RISCV)
	addMac(x64, x86) {
		linkerFlags += " -framework CoreServices -framework Carbon"
	}
	addMac(x64, ARM) {
		linkerFlags += " -framework CoreServices -framework Carbon"
	}
	addAndroid()
	addIOS()
}
